(function(){const i=document.createElement("link").relList;if(i&&i.supports&&i.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))n(e);new MutationObserver(e=>{for(const t of e)if(t.type==="childList")for(const s of t.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&n(s)}).observe(document,{childList:!0,subtree:!0});function o(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),e.crossOrigin==="use-credentials"?t.credentials="include":e.crossOrigin==="anonymous"?t.credentials="omit":t.credentials="same-origin",t}function n(e){if(e.ep)return;e.ep=!0;const t=o(e);fetch(e.href,t)}})();(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))o(n);new MutationObserver(n=>{for(const e of n)if(e.type==="childList")for(const t of e.addedNodes)t.tagName==="LINK"&&t.rel==="modulepreload"&&o(t)}).observe(document,{childList:!0,subtree:!0});function i(n){const e={};return n.integrity&&(e.integrity=n.integrity),n.referrerPolicy&&(e.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?e.credentials="include":n.crossOrigin==="anonymous"?e.credentials="omit":e.credentials="same-origin",e}function o(n){if(n.ep)return;n.ep=!0;const e=i(n);fetch(n.href,e)}})();const p="https://bianco.sitiweb.toscana.it/wp-json/wp/v2/docs",f="https://bianco.sitiweb.toscana.it/wp-json/wp/v2/categories";async function m(){try{const r=await fetch(p);if(!r.ok)throw new Error("Network response was not ok");const i=await r.json(),o=await fetch(f);if(!o.ok)throw new Error("Network response was not ok");const n=(await o.json()).reduce((e,t)=>(t.parent===0?e[t.id]={...t,subcategories:[],articles:[]}:(e[t.parent]||(e[t.parent]={subcategories:[]}),e[t.parent].subcategories.push(t)),e),{});return i.forEach(e=>{e.categories.forEach(t=>{const s=Object.values(n).find(c=>c.subcategories.some(a=>a.id===t));if(s){const c=s.subcategories.find(a=>a.id===t);c.articles=c.articles||[],c.articles.push(e)}})}),n}catch(r){console.error("There was a problem with the fetch operation:",r)}}function h(r){const i=document.getElementById("docs-list"),o=document.getElementById("article-display");i.innerHTML="",o.innerHTML="",Object.values(r).forEach(e=>{const t=e.subcategories.filter(l=>l.articles.length>0);if(t.length===0)return;const s=document.createElement("div");s.className="category-section";const c=document.createElement("h2");c.textContent=e.name,c.className="text-primary",s.appendChild(c);const a=document.createElement("div");a.className="subcategory-list",t.forEach(l=>{const d=document.createElement("div");d.className="subcategory-item",d.innerHTML=`
                <h5>${l.name} (${l.articles.length})</h5>
                ${l.description?`<p>${l.description}</p>`:""}
                <ul class="list-group mt-2">
                    ${l.articles.map(u=>`
                        <li class="list-group-item article-item" data-article-id="${u.id}" data-article-title="${u.title.rendered.toLowerCase()}">
                            <a href="#" class="article-link">${u.title.rendered}</a>
                        </li>
                    `).join("")}
                </ul>
            `,a.appendChild(d)}),s.appendChild(a),i.appendChild(s)}),document.querySelectorAll(".article-link").forEach(e=>{e.addEventListener("click",function(t){t.preventDefault();const s=this.parentElement.getAttribute("data-article-id");y(s)})});const n=document.getElementById("search-input");n.addEventListener("input",function(){const e=n.value.toLowerCase();document.querySelectorAll(".article-item").forEach(t=>{t.getAttribute("data-article-title").includes(e)?t.style.display="":t.style.display="none"})})}async function y(r){try{const i=await fetch(`https://bianco.sitiweb.toscana.it/wp-json/wp/v2/docs/${r}`);if(!i.ok)throw new Error("Network response was not ok");const o=await i.json();g(o)}catch(i){console.error("There was a problem with the fetch operation:",i)}}function g(r){const i=document.getElementById("docs-list"),o=document.getElementById("article-display");i.style.display="none",o.innerHTML=`
        <a href="#" class="btn-back">‚Üê Torna indietro</a>
        <h2 class="article-display-title">${r.title.rendered}</h2>
        <div class="article-display-content">${r.content.rendered}</div>
    `,document.querySelector(".btn-back").addEventListener("click",function(n){n.preventDefault(),o.innerHTML="",i.style.display="block"})}async function w(){const r=await m();r&&h(r)}w();
